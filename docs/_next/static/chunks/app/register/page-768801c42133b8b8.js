(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6525:(e,t,n)=>{Promise.resolve().then(n.bind(n,3488))},6463:(e,t,n)=>{"use strict";var a=n(1169);n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},3488:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var a=n(7437),s=n(2265),r=n(6463),o=n(2800);function c(){let[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)(""),[i,u]=(0,s.useState)(""),[l,d]=(0,s.useState)(null),g=(0,r.useRouter)(),h=async t=>{t.preventDefault(),d(null);try{await (0,o.register)(e,n,i),g.push("/login")}catch(e){d((null==e?void 0:e.message)||"Registration failed")}};return(0,a.jsxs)("div",{className:"p-8 max-w-md mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Register"}),(0,a.jsxs)("form",{onSubmit:h,className:"mt-4 space-y-4",children:[l&&(0,a.jsx)("div",{className:"text-red-600",children:l}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm",children:"Username"}),(0,a.jsx)("input",{value:e,onChange:e=>t(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm",children:"Email"}),(0,a.jsx)("input",{value:i,onChange:e=>u(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm",children:"Password"}),(0,a.jsx)("input",{type:"password",value:n,onChange:e=>c(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"bg-slate-800 text-white px-4 py-2 rounded",children:"Register"})})]})]})}},2800:(e,t,n)=>{"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"Content-Type":"application/json"},a=localStorage.getItem("accessToken");a&&(n.Authorization="Bearer ".concat(a));let s=await fetch("".concat("http://127.0.0.1:8000/api").concat(e),{credentials:"include",headers:n,...t});if(401===s.status)throw localStorage.removeItem("accessToken"),Error("Unauthorized");if(!s.ok)throw Error(await s.text()||s.statusText);return 204===s.status?null:s.json()}function s(e,t){localStorage.setItem("accessToken",e),t&&localStorage.setItem("refreshToken",t)}function r(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}async function o(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",String(e.page)),(null==e?void 0:e.search)&&t.set("search",e.search);let n=t.toString()?"?".concat(t.toString()):"";return a("/fighters/".concat(n))}async function c(e){return a("/fighters/".concat(e,"/"))}async function i(e,t){let n=await a("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})});return n&&n.access&&s(n.access,n.refresh),n}async function u(e,t,n){return a("/auth/register",{method:"POST",body:JSON.stringify({username:e,password:t,email:n})})}async function l(){return a("/auth/me")}async function d(){return a("/events/")}async function g(){return a("/teams/my/")}async function h(e){return a("/teams/update/",{method:"POST",body:JSON.stringify(e)})}async function m(e){return a("/scoring/league/".concat(e,"/"))}async function f(){return a("/leagues/")}async function y(e){return a("/leagues/",{method:"POST",body:JSON.stringify(e)})}async function p(e){return a("/leagues/".concat(e,"/join/"),{method:"POST"})}async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a("/teams/create/",{method:"POST",body:JSON.stringify({league_id:e,fighter_ids:t})})}n.r(t),n.d(t,{createLeague:()=>y,createTeam:()=>x,getEvents:()=>d,getFighter:()=>c,getFighters:()=>o,getLeagues:()=>f,getStandings:()=>m,getTeam:()=>g,joinLeague:()=>p,login:()=>i,logout:()=>r,me:()=>l,register:()=>u,setTokens:()=>s,updateTeam:()=>h})}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(6525)),_N_E=e.O()}]);