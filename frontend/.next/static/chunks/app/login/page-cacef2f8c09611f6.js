(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6727:(e,t,n)=>{Promise.resolve().then(n.bind(n,1193))},6463:(e,t,n)=>{"use strict";var a=n(1169);n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},1193:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var a=n(7437),s=n(2265),r=n(6463),o=n(2800);function c(){let[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)(""),[i,u]=(0,s.useState)(null),l=(0,r.useRouter)(),d=async t=>{t.preventDefault(),u(null);try{await (0,o.login)(e,n),l.push("/my-team")}catch(e){u((null==e?void 0:e.message)||"Login failed")}};return(0,a.jsxs)("div",{className:"p-8 max-w-md mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Login"}),(0,a.jsxs)("form",{onSubmit:d,className:"mt-4 space-y-4",children:[i&&(0,a.jsx)("div",{className:"text-red-600",children:i}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm",children:"Username"}),(0,a.jsx)("input",{value:e,onChange:e=>t(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm",children:"Password"}),(0,a.jsx)("input",{type:"password",value:n,onChange:e=>c(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"bg-slate-800 text-white px-4 py-2 rounded",children:"Login"})})]})]})}},2800:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createLeague:()=>p,createTeam:()=>v,getEvents:()=>g,getFighter:()=>i,getFighters:()=>c,getLeagues:()=>y,getStandings:()=>f,getTeam:()=>h,joinLeague:()=>S,login:()=>u,logout:()=>o,me:()=>d,register:()=>l,setTokens:()=>r,updateTeam:()=>m});let a=n(357).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api";async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"Content-Type":"application/json"},s=localStorage.getItem("accessToken");s&&(n.Authorization="Bearer ".concat(s));let r=await fetch("".concat(a).concat(e),{credentials:"include",headers:n,...t});if(401===r.status)throw localStorage.removeItem("accessToken"),Error("Unauthorized");if(!r.ok)throw Error(await r.text()||r.statusText);return 204===r.status?null:r.json()}function r(e,t){localStorage.setItem("accessToken",e),t&&localStorage.setItem("refreshToken",t)}function o(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}async function c(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",String(e.page)),(null==e?void 0:e.search)&&t.set("search",e.search);let n=t.toString()?"?".concat(t.toString()):"";return s("/fighters/".concat(n))}async function i(e){return s("/fighters/".concat(e,"/"))}async function u(e,t){let n=await s("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})});return n&&n.access&&r(n.access,n.refresh),n}async function l(e,t,n){return s("/auth/register",{method:"POST",body:JSON.stringify({username:e,password:t,email:n})})}async function d(){return s("/auth/me")}async function g(){return s("/events/")}async function h(){return s("/teams/my/")}async function m(e){return s("/teams/update/",{method:"POST",body:JSON.stringify(e)})}async function f(e){return s("/scoring/league/".concat(e,"/"))}async function y(){return s("/leagues/")}async function p(e){return s("/leagues/",{method:"POST",body:JSON.stringify(e)})}async function S(e){return s("/leagues/".concat(e,"/join/"),{method:"POST"})}async function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return s("/teams/create/",{method:"POST",body:JSON.stringify({league_id:e,fighter_ids:t})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(6727)),_N_E=e.O()}]);