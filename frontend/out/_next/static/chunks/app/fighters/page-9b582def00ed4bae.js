(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{7680:(e,t,s)=>{Promise.resolve().then(s.bind(s,5643))},5643:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(7437),n=s(2265);function r(e){let{fighter:t}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 flex items-center space-x-4",children:[(0,a.jsx)("img",{src:t.image_url||"/placeholder.png",alt:t.name,className:"w-16 h-16 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:t.weight_class}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:t.record})]})]})}var c=s(2800);function i(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)(null),[u,d]=(0,n.useState)(1),[g,h]=(0,n.useState)(""),[m,f]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let e=!0;return i(!0),(0,c.getFighters)({page:u,search:g}).then(s=>{e&&(s.results?(t(s.results),f(s.count||0)):(t(s),f(Array.isArray(s)?s.length:0)))}).catch(e=>o(String(e))).finally(()=>i(!1)),()=>{e=!1}},[u,g]),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Fighters"}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,a.jsx)("input",{value:g,onChange:e=>h(e.target.value),placeholder:"Search fighters...",className:"border rounded px-3 py-2"}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:["Total: ",m]})]}),s&&(0,a.jsx)("p",{className:"mt-4",children:"Loading fighters..."}),l&&(0,a.jsxs)("p",{className:"mt-4 text-red-600",children:["Error: ",l]}),(0,a.jsx)("div",{className:"mt-6 grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,a.jsx)(r,{fighter:e},e.id))}),(0,a.jsxs)("div",{className:"mt-6 flex items-center gap-2",children:[(0,a.jsx)("button",{disabled:u<=1,onClick:()=>d(e=>Math.max(1,e-1)),className:"px-3 py-1 border rounded",children:"Prev"}),(0,a.jsxs)("div",{className:"text-sm",children:["Page ",u]}),(0,a.jsx)("button",{disabled:0===e.length,onClick:()=>d(e=>e+1),className:"px-3 py-1 border rounded",children:"Next"})]})]})}},2800:(e,t,s)=>{"use strict";s.r(t),s.d(t,{createLeague:()=>p,createTeam:()=>S,getEvents:()=>g,getFighter:()=>l,getFighters:()=>i,getLeagues:()=>x,getStandings:()=>f,getTeam:()=>h,joinLeague:()=>y,login:()=>o,logout:()=>c,me:()=>d,register:()=>u,setTokens:()=>r,updateTeam:()=>m});let a=s(357).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={"Content-Type":"application/json"},n=localStorage.getItem("accessToken");n&&(s.Authorization="Bearer ".concat(n));let r=await fetch("".concat(a).concat(e),{credentials:"include",headers:s,...t});if(401===r.status)throw localStorage.removeItem("accessToken"),Error("Unauthorized");if(!r.ok)throw Error(await r.text()||r.statusText);return 204===r.status?null:r.json()}function r(e,t){localStorage.setItem("accessToken",e),t&&localStorage.setItem("refreshToken",t)}function c(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}async function i(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",String(e.page)),(null==e?void 0:e.search)&&t.set("search",e.search);let s=t.toString()?"?".concat(t.toString()):"";return n("/fighters/".concat(s))}async function l(e){return n("/fighters/".concat(e,"/"))}async function o(e,t){let s=await n("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})});return s&&s.access&&r(s.access,s.refresh),s}async function u(e,t,s){return n("/auth/register",{method:"POST",body:JSON.stringify({username:e,password:t,email:s})})}async function d(){return n("/auth/me")}async function g(){return n("/events/")}async function h(){return n("/teams/my/")}async function m(e){return n("/teams/update/",{method:"POST",body:JSON.stringify(e)})}async function f(e){return n("/scoring/league/".concat(e,"/"))}async function x(){return n("/leagues/")}async function p(e){return n("/leagues/",{method:"POST",body:JSON.stringify(e)})}async function y(e){return n("/leagues/".concat(e,"/join/"),{method:"POST"})}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n("/teams/create/",{method:"POST",body:JSON.stringify({league_id:e,fighter_ids:t})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(7680)),_N_E=e.O()}]);